{"version":3,"sources":["../lib/index.js"],"names":["NAMESPACE","NON_BODY_HTTP_METHOD","axios","interceptors","request","use","config","angxiosConfig","Object","keys","length","retryCount","Angxios","response","error","includes","method","url","data","Promise","reject","baseURL","defaults","time","timeout","get","options","body","post","put","patch"],"mappings":"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","sourcesContent":["import axios from \"axios\";\n\nconst NAMESPACE = \"angxios\";\nconst NON_BODY_HTTP_METHOD = [\"get\", \"delete\", \"options\"];\n\naxios.interceptors.request.use((config) => {\n  const angxiosConfig = config[NAMESPACE] || {};\n\n  if (Object.keys(angxiosConfig).length === 0) {\n    config[NAMESPACE] = angxiosConfig;\n    angxiosConfig.retryCount = Angxios.retryCount;\n  } else {\n    --angxiosConfig.retryCount;\n  }\n\n  return config;\n});\n\naxios.interceptors.response.use(\n  (config) => {\n    return config;\n  },\n  (error) => {\n    const config = error.config;\n\n    if (config[NAMESPACE].retryCount > 0) {\n      if (NON_BODY_HTTP_METHOD.includes(config.method)) {\n        return axios[`${config.method}`](config.url, config);\n      } else {\n        return axios[`${config.method}`](config.url, config.data, config);\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nconst Angxios = new (class {\n  retryCount = 0;\n  axios = axios;\n\n  /**\n   * @name setBaseURL\n   * @description set global axios defaults base URL\n   * @param {string} baseURL\n   */\n  setBaseURL(baseURL) {\n    axios.defaults.baseURL = baseURL;\n  }\n\n  /**\n   * @name setTimeout\n   * @description set global axios defaults timeout\n   * @param {number} time\n   */\n  setTimeout(time) {\n    axios.defaults.timeout = time;\n  }\n\n  /**\n   * @name setRetryCount\n   * @description set request retry count\n   * @param {number} retryCount\n   */\n  setRetryCount(retryCount) {\n    this.retryCount = retryCount;\n  }\n\n  // request(config) {}\n  // head(url, config) {}\n\n  /**\n   * @name get\n   * @description axios get Function\n   * @param {string} url\n   * @param {?object} config\n   */\n  get(url, config) {\n    return axios.get(url, config ? config : null);\n  }\n\n  /**\n   * @name delete\n   * @description axios delete Function\n   * @param {string} url\n   * @param {?object} config\n   */\n  delete(url, config) {\n    return axios.delete(url, config ? config : null);\n  }\n\n  /**\n   * @name options\n   * @description axios options Function\n   * @param {string} url\n   * @param {?object} config\n   */\n  options(url, config) {\n    return axios.options(url, config ? config : null);\n  }\n\n  /**\n   * @name post\n   * @description axios post Function\n   * @param {string} url\n   * @param {?object} body\n   * @param {?object} config\n   */\n  post(url, body, config) {\n    return axios.post(url, body ? body : null, config ? config : null);\n  }\n\n  /**\n   * @name put\n   * @description axios put Function\n   * @param {string} url\n   * @param {?object} body\n   * @param {?object} config\n   */\n  put(url, body, config) {\n    return axios.put(url, body ? body : null, config ? config : null);\n  }\n\n  /**\n   * @name patch\n   * @description axios patch Function\n   * @param {string} url\n   * @param {?object} body\n   * @param {?object} config\n   */\n  patch(url, body, config) {\n    return axios.patch(url, body ? body : null, config ? config : null);\n  }\n})();\n\nexport default Angxios;\n"],"file":"index.js"}